Shares of Citigroup and Wells Fargo rose Thursday after an analyst at UBS upgraded both stocks to buy.

Citigroup's stock was up 1.1 percent, while Wells Fargo gained by 0.9 percent.

UBS changed its rating on Wells Fargo from neutral to buy but lowered its price target from to $60 from $63. The new target is 12 percent higher than Thursday's price, around $53.50.

Shares of Wells Fargo took a hit last year after revelations of the bank's cross-selling program. Bank employees were pushed to sell as many products as possible, and opened accounts in customers' names without their permission to hit sales targets. The bank reached a $190 million settlement with U.S. authorities in 2016, and CEO John Stumpf was forced to resign.

The UBS analyst acknowledged the challenges of overcoming the hit to Wells Fargo's reputation and its regulatory hurdles but said shares are trading at "historically wide PE discounts" compared to other large cap regional banks.

"Wells Fargo's substantial underperformance has created a buying opportunity," Saul Martinez wrote in a note to clients Thursday. "Wells Fargo shares have lagged the average bank in our coverage universe by a substantial 49 percentage points."

UBS also upgraded Citigroup to buy from neutral, and increased its price target to $80 from $78.

The bank trades at a discount to other large banks, including J.P. Morgan Chase and Bank of America. The analyst cited the profitability of its global consumer banking operation, improved loan growth and earnings momentum at Citibanamex, its Mexican operation, among the reasons for optimism.

"We do not believe that the current share price adequately captures incremental improvements in operating and financial performance in the coming years and still considerable capital optimization opportunities," Martinez said.